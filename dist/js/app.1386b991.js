(function(){"use strict";var e={2076:function(e,o,t){var n=t(5130),l=t(6768),u=t(4232);const a=e=>((0,l.Qi)("data-v-4152ff03"),e=e(),(0,l.jt)(),e),d={class:"container","data-title":"記帳好幫手"},r={key:0,class:"book-selection"},k=a((()=>(0,l.Lk)("h1",null,"選擇帳本",-1))),s=["onClick"],i=["onClick"],c=a((()=>(0,l.Lk)("h2",null,"新增帳本",-1))),b=a((()=>(0,l.Lk)("label",null,"名稱:",-1))),L=a((()=>(0,l.Lk)("br",null,null,-1))),h=a((()=>(0,l.Lk)("button",{type:"submit",class:"button"},"新增",-1))),p={key:0,class:"modal"},_=a((()=>(0,l.Lk)("h2",null,"確認刪除",-1))),m=a((()=>(0,l.Lk)("p",null,"確定要刪除這條記錄嗎？",-1))),B=a((()=>(0,l.Lk)("h2",null,"查詢指定帳本紀錄",-1))),f=a((()=>(0,l.Lk)("label",null,"選擇帳本:",-1))),v=["value"],g=a((()=>(0,l.Lk)("br",null,null,-1))),w=a((()=>(0,l.Lk)("label",null,"開始日期:",-1))),U=a((()=>(0,l.Lk)("br",null,null,-1))),y=a((()=>(0,l.Lk)("label",null,"結束日期:",-1))),E=a((()=>(0,l.Lk)("br",null,null,-1))),C=a((()=>(0,l.Lk)("button",{type:"submit",class:"button"},"查询",-1))),A=a((()=>(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"收支"),(0,l.Lk)("th",null,"金額"),(0,l.Lk)("th",null,"日期"),(0,l.Lk)("th",null,"類別"),(0,l.Lk)("th",null,"項目"),(0,l.Lk)("th",null,"備註")])],-1))),X=a((()=>(0,l.Lk)("div",{class:"developer-info"},[(0,l.Lk)("h2",null,"開發者訊息"),(0,l.Lk)("p",null,"本應用由鄭達蔚、許懷恕共同開發設計"),(0,l.Lk)("p",null,"聯繫方式：huais0519@gmail.com"),(0,l.Lk)("p",null,"本作業為資料庫系統期末專題"),(0,l.Lk)("p",null,"歡迎乾爹買廣告")],-1))),D={key:1,class:"record-section"},V=a((()=>(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"收支"),(0,l.Lk)("th",null,"金額"),(0,l.Lk)("th",null,"日期"),(0,l.Lk)("th",null,"類別"),(0,l.Lk)("th",null,"項目"),(0,l.Lk)("th",null,"備註"),(0,l.Lk)("th",null,"操作")])],-1))),O=["onClick"],q=["onClick"],x={key:0,class:"form_editbook"},S=a((()=>(0,l.Lk)("h2",null,"編輯帳本記錄",-1))),N=a((()=>(0,l.Lk)("label",null,"收支:",-1))),J=a((()=>(0,l.Lk)("br",null,null,-1))),j=a((()=>(0,l.Lk)("label",null,"金額:",-1))),T=a((()=>(0,l.Lk)("br",null,null,-1))),I=a((()=>(0,l.Lk)("label",null,"日期:",-1))),$=a((()=>(0,l.Lk)("br",null,null,-1))),W=a((()=>(0,l.Lk)("label",null,"類別:",-1))),P=a((()=>(0,l.Lk)("br",null,null,-1))),Q=a((()=>(0,l.Lk)("label",null,"項目:",-1))),F=a((()=>(0,l.Lk)("br",null,null,-1))),M=a((()=>(0,l.Lk)("label",null,"備註:",-1))),K=a((()=>(0,l.Lk)("br",null,null,-1))),z=a((()=>(0,l.Lk)("button",{type:"submit",class:"button view-button button-danger"},"保存",-1))),G=a((()=>(0,l.Lk)("h2",null,"新增帳本記錄",-1))),H=a((()=>(0,l.Lk)("label",null,"收支:",-1))),R=a((()=>(0,l.Lk)("br",null,null,-1))),Y=a((()=>(0,l.Lk)("label",null,"金額:",-1))),Z=a((()=>(0,l.Lk)("br",null,null,-1))),ee=a((()=>(0,l.Lk)("label",null,"日期:",-1))),oe=a((()=>(0,l.Lk)("br",null,null,-1))),te=a((()=>(0,l.Lk)("label",null,"類別:",-1))),ne=a((()=>(0,l.Lk)("br",null,null,-1))),le=a((()=>(0,l.Lk)("label",null,"項目:",-1))),ue=a((()=>(0,l.Lk)("br",null,null,-1))),ae=a((()=>(0,l.Lk)("label",null,"備註:",-1))),de=a((()=>(0,l.Lk)("br",null,null,-1))),re=a((()=>(0,l.Lk)("button",{type:"submit",class:"button add-button"},"新增",-1))),ke={key:1,class:"modal"},se=a((()=>(0,l.Lk)("h2",null,"確認刪除",-1))),ie=a((()=>(0,l.Lk)("p",null,"確定要刪除這條記錄嗎？",-1))),ce={key:0,class:"about-us"},be=a((()=>(0,l.Lk)("h1",null,"关于我们",-1))),Le=a((()=>(0,l.Lk)("p",null,"这是我们的介绍...",-1)));function he(e,o,t,a,he,pe){const _e=(0,l.gN)("title");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",d,[he.selectedBook?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",r,[k,(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(he.acuntUsers,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e.acunt_book_name,class:"book-item"},[(0,l.eW)((0,u.v_)(e.acunt_book_name)+" ",1),(0,l.Lk)("button",{onClick:o=>pe.selectUser(e),class:"button view-button"},"查看",8,s),(0,l.Lk)("button",{onClick:o=>pe.confirmDeleteUser(e.acunt_book_name),class:"button button-danger"},"刪除",8,i)])))),128))]),c,(0,l.Lk)("form",{onSubmit:o[1]||(o[1]=(0,n.D$)(((...e)=>pe.addNewUser&&pe.addNewUser(...e)),["prevent"])),class:"form"},[b,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>he.newUser.acunt_book_name=e),required:""},null,512),[[n.Jo,he.newUser.acunt_book_name]]),L,h],32),he.deletingUser?((0,l.uX)(),(0,l.CE)("div",p,[_,m,(0,l.Lk)("button",{onClick:o[2]||(o[2]=(...e)=>pe.deleteUser&&pe.deleteUser(...e)),class:"button button-danger view-button"},"確定"),(0,l.Lk)("button",{onClick:o[3]||(o[3]=(...e)=>pe.cancelDeleteUser&&pe.cancelDeleteUser(...e)),class:"button"},"取消")])):(0,l.Q3)("",!0),B,(0,l.Lk)("form",{onSubmit:o[7]||(o[7]=(0,n.D$)(((...e)=>pe.fetchBooksByPeriod&&pe.fetchBooksByPeriod(...e)),["prevent"])),class:"form"},[f,(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":o[4]||(o[4]=o=>e.selectedBookName=o),class:"custom-select",required:""},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(he.acuntUsers,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.acunt_book_name,value:e.acunt_book_name},(0,u.v_)(e.acunt_book_name),9,v)))),128))],512),[[n.u1,e.selectedBookName]]),g,w,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[5]||(o[5]=o=>e.start_date=o),type:"date",required:""},null,512),[[n.Jo,e.start_date]]),U,y,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[6]||(o[6]=o=>e.end_date=o),type:"date",required:""},null,512),[[n.Jo,e.end_date]]),E,C],32),(0,l.Lk)("table",null,[A,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(he.books,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.book_id},[(0,l.Lk)("td",null,(0,u.v_)(pe.getInAndOutLabel(e.in_and_out)),1),(0,l.Lk)("td",null,(0,u.v_)(Math.floor(e.amount)),1),(0,l.Lk)("td",null,(0,u.v_)(new Date(e.dates).toLocaleDateString()),1),(0,l.Lk)("td",null,(0,u.v_)(e.class),1),(0,l.Lk)("td",null,(0,u.v_)(e.item),1),(0,l.Lk)("td",null,(0,u.v_)(e.remark),1)])))),128))])]),X])),he.selectedBook?((0,l.uX)(),(0,l.CE)("div",D,[(0,l.Lk)("h1",null,(0,u.v_)(he.selectedBook.acunt_book_name)+" 帳本記錄",1),(0,l.Lk)("table",null,[V,(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(he.books,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.book_id},[(0,l.Lk)("td",null,(0,u.v_)(pe.getInAndOutLabel(e.in_and_out)),1),(0,l.Lk)("td",null,(0,u.v_)(Math.floor(e.amount)),1),(0,l.Lk)("td",null,(0,u.v_)(new Date(e.dates).toLocaleDateString()),1),(0,l.Lk)("td",null,(0,u.v_)(e.class),1),(0,l.Lk)("td",null,(0,u.v_)(e.item),1),(0,l.Lk)("td",null,(0,u.v_)(e.remark),1),(0,l.Lk)("td",null,[(0,l.Lk)("button",{onClick:o=>pe.editBook(e),class:"button view-button"},"編輯",8,O),(0,l.Lk)("button",{onClick:o=>pe.confirmDeleteBook(e.book_id),class:"button button-danger"},"刪除",8,q)])])))),128))])]),he.editingBook?((0,l.uX)(),(0,l.CE)("div",x,[S,(0,l.Lk)("form",{onSubmit:o[17]||(o[17]=(0,n.D$)(((...e)=>pe.saveEditedBook&&pe.saveEditedBook(...e)),["prevent"]))},[N,(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":o[8]||(o[8]=e=>he.editedBook.in_and_out=e),value:"0",required:""},null,512),[[n.XL,he.editedBook.in_and_out]]),(0,l.eW)(" 支出 "),(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":o[9]||(o[9]=e=>he.editedBook.in_and_out=e),value:"1",required:""},null,512),[[n.XL,he.editedBook.in_and_out]]),(0,l.eW)(" 收入 "),J,j,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[10]||(o[10]=e=>he.editedBook.amount=e),type:"number",onInput:o[11]||(o[11]=(...e)=>pe.updateAmount&&pe.updateAmount(...e)),required:""},null,544),[[n.Jo,he.editedBook.amount]]),T,I,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[12]||(o[12]=e=>he.editedBook.dates=e),type:"date",required:""},null,512),[[n.Jo,he.editedBook.dates]]),$,W,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[13]||(o[13]=e=>he.editedBook.class=e),required:""},null,512),[[n.Jo,he.editedBook.class]]),P,Q,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[14]||(o[14]=e=>he.editedBook.item=e),required:""},null,512),[[n.Jo,he.editedBook.item]]),F,M,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[15]||(o[15]=e=>he.editedBook.remark=e)},null,512),[[n.Jo,he.editedBook.remark]]),K,z,(0,l.Lk)("button",{onClick:o[16]||(o[16]=(...e)=>pe.cancelEdit&&pe.cancelEdit(...e)),class:"button"},"取消")],32)])):(0,l.Q3)("",!0),G,(0,l.Lk)("form",{onSubmit:o[25]||(o[25]=(0,n.D$)(((...e)=>pe.addNewBook&&pe.addNewBook(...e)),["prevent"])),class:"form"},[H,(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":o[18]||(o[18]=e=>he.newBook.in_and_out=e),value:"0",required:""},null,512),[[n.XL,he.newBook.in_and_out]]),(0,l.eW)(" 支出 "),(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":o[19]||(o[19]=e=>he.newBook.in_and_out=e),value:"1",required:""},null,512),[[n.XL,he.newBook.in_and_out]]),(0,l.eW)(" 收入 "),R,Y,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[20]||(o[20]=e=>he.newBook.amount=e),type:"number",required:""},null,512),[[n.Jo,he.newBook.amount]]),Z,ee,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[21]||(o[21]=e=>he.newBook.dates=e),type:"date",required:""},null,512),[[n.Jo,he.newBook.dates]]),oe,te,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[22]||(o[22]=e=>he.newBook.class=e),required:""},null,512),[[n.Jo,he.newBook.class]]),ne,le,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[23]||(o[23]=e=>he.newBook.item=e),required:""},null,512),[[n.Jo,he.newBook.item]]),ue,ae,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":o[24]||(o[24]=e=>he.newBook.remark=e)},null,512),[[n.Jo,he.newBook.remark]]),de,re],32),he.deletingBook?((0,l.uX)(),(0,l.CE)("div",ke,[se,ie,(0,l.Lk)("button",{onClick:o[26]||(o[26]=(...e)=>pe.deleteBook&&pe.deleteBook(...e)),class:"button button-danger view-button"},"確定"),(0,l.Lk)("button",{onClick:o[27]||(o[27]=(...e)=>pe.cancelDeleteBook&&pe.cancelDeleteBook(...e)),class:"button"},"取消")])):(0,l.Q3)("",!0),(0,l.Lk)("button",{onClick:o[28]||(o[28]=(...e)=>pe.exportToExcel&&pe.exportToExcel(...e)),class:"button view-button button-exportToExcel"},"匯出 Excel"),(0,l.Lk)("button",{onClick:o[29]||(o[29]=(...e)=>pe.deselectBook&&pe.deselectBook(...e)),class:"button back-button"},"返回選擇帳本")])):(0,l.Q3)("",!0)])),[[_e]]),e.showAboutUs?((0,l.uX)(),(0,l.CE)("div",ce,[be,Le,(0,l.Lk)("button",{onClick:o[30]||(o[30]=(...o)=>e.navigateBackToSecondLayer&&e.navigateBackToSecondLayer(...o)),class:"button"},"返回")])):(0,l.Q3)("",!0)],64)}var pe=t(2505),_e=t(2732),me={data(){return{acuntUsers:[],selectedBook:null,books:[],editingBook:null,editedBook:{in_and_out:"",amount:"",dates:"",class:"",item:"",remark:""},newBook:{in_and_out:"",amount:"",dates:"",class:"",item:"",remark:""},newUser:{acunt_book_name:""},deletingUser:null,deletingBook:null}},created(){this.fetchAcuntUsers()},methods:{fetchAcuntUsers(){pe.A.get("http://127.0.0.1:5000/api/acunt_user").then((e=>{this.acuntUsers=e.data})).catch((e=>{console.error("Error fetching acunt users:",e)}))},fetchBooks(){this.selectedBook&&pe.A.get(`http://127.0.0.1:5000/api/acunt_books/${this.selectedBook.acunt_book_name}`).then((e=>{this.books=e.data})).catch((e=>{console.error("Error fetching books:",e)}))},addNewUser(){pe.A.post("http://127.0.0.1:5000/api/acunt_user",this.newUser,{headers:{"Content-Type":"application/json"}}).then((e=>{console.log("New user added:",e.data),this.newUser.acunt_book_name="",this.fetchAcuntUsers()})).catch((e=>{console.error("Error adding new user:",e)}))},confirmDeleteUser(e){this.deletingUser=e},deleteUser(){pe.A.delete(`http://127.0.0.1:5000/api/acunt_user/${this.deletingUser}`).then((e=>{console.log("User deleted:",e.data),this.fetchAcuntUsers(),this.deletingUser=null})).catch((e=>{console.error("Error deleting user:",e)}))},selectUser(e){this.selectedBook=e,this.newBook.acunt_book_name=e.acunt_book_name,this.fetchBooks()},addNewBook(){const e={...this.newBook,acunt_book_name:this.selectedBook.acunt_book_name};pe.A.post("http://127.0.0.1:5000/api/acunt_books",e,{headers:{"Content-Type":"application/json"}}).then((e=>{console.log("New book record added:",e.data),this.fetchBooks(),this.resetNewBook()})).catch((e=>{console.error("Error adding new book record:",e)}))},confirmDeleteBook(e){this.deletingBook=e},deleteBook(){pe.A.delete(`http://127.0.0.1:5000/api/acunt_books/${this.deletingBook}`).then((e=>{console.log("Book deleted:",e.data),this.fetchBooks(),this.deletingBook=null})).catch((e=>{console.error("Error deleting book:",e)}))},cancelDeleteBook(){this.deletingBook=null},deselectBook(){this.selectedBook=null,this.books=[]},resetNewBook(){this.newBook={in_and_out:"",amount:"",dates:"",class:"",item:"",remark:""}},cancelDeleteUser(){this.deletingUser=null},getInAndOutLabel(e){return 0===e?"支出":"收入"},fetchBooksByPeriod(){pe.A.post(`http://127.0.0.1:5000/api/acunt_books/${this.selectedBookName}/period`,{start_date:this.start_date,end_date:this.end_date}).then((e=>{this.books=e.data})).catch((e=>{console.error("Error fetching books by period:",e)}))},editBook(e){this.editingBook=e,this.editedBook={...e,dates:new Date(e.dates).toISOString().substr(0,10)}},cancelEdit(){this.editingBook=null},saveEditedBook(){pe.A.put(`http://127.0.0.1:5000/api/acunt_books/${this.editingBook.book_id}`,this.editedBook).then((e=>{console.log("Book updated:",e.data),this.fetchBooks(),this.editingBook=null})).catch((e=>{console.error("Error updating book:",e)}))},updateAmount(e){const o=e.target.value;this.editedBook.amount=Math.floor(o)},exportToExcel(){const e=_e.Wp.book_new(),o=_e.Wp.json_to_sheet(this.books);_e.Wp.book_append_sheet(e,o,"帳本記錄"),_e._h(e,`${this.selectedBook.acunt_book_name}_帳本記錄.xlsx`)}}},Be=t(1241);const fe=(0,Be.A)(me,[["render",he],["__scopeId","data-v-4152ff03"]]);var ve=fe;(0,n.Ef)(ve).mount("#app")}},o={};function t(n){var l=o[n];if(void 0!==l)return l.exports;var u=o[n]={exports:{}};return e[n].call(u.exports,u,u.exports,t),u.exports}t.m=e,function(){var e=[];t.O=function(o,n,l,u){if(!n){var a=1/0;for(s=0;s<e.length;s++){n=e[s][0],l=e[s][1],u=e[s][2];for(var d=!0,r=0;r<n.length;r++)(!1&u||a>=u)&&Object.keys(t.O).every((function(e){return t.O[e](n[r])}))?n.splice(r--,1):(d=!1,u<a&&(a=u));if(d){e.splice(s--,1);var k=l();void 0!==k&&(o=k)}}return o}u=u||0;for(var s=e.length;s>0&&e[s-1][2]>u;s--)e[s]=e[s-1];e[s]=[n,l,u]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var l,u,a=n[0],d=n[1],r=n[2],k=0;if(a.some((function(o){return 0!==e[o]}))){for(l in d)t.o(d,l)&&(t.m[l]=d[l]);if(r)var s=r(t)}for(o&&o(n);k<a.length;k++)u=a[k],t.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return t.O(s)},n=self["webpackChunkmoz_todo_vue"]=self["webpackChunkmoz_todo_vue"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(2076)}));n=t.O(n)})();
//# sourceMappingURL=app.1386b991.js.map